# 3D Depth Viewer ｜ 3D深度查看器

一个基于 WebGL 的本地 HTTPS 深度图 3D 视差查看器。加载一张彩色图与对应深度图，在浏览器中实时合成“伪 3D”效果，并支持画布拖拽调整偏转。

- 英文名：3D Depth Viewer
- 中文名：3D深度查看器

## 功能
- 加载原始图像与深度图并预览
- WebGL 实时合成：阈值与“突出”程度控制，x/y 偏转快速预览
- 画布拖拽即可调整 x_diff / y_diff（更直观）
- 本地自签名 HTTPS 静态服务器，陀螺仪需要安全上下文的浏览器 API 下才能调用
- 预留更多参数调整（焦点位置，缩放/偏移、模糊、边框等），可自行尝试以获取最佳效果

## 目录结构
```
index.html              # 前端 WebGL 查看器
web.py                  # 本地 HTTPS 静态服务器（标准库实现）
localhost.cert.pem      # 自签名证书（本地开发）
localhost.key.pem       # 自签名证书私钥（本地开发）
```

## 先决条件
- Windows（PowerShell）
- Python 3.8+（已加入 PATH）
- 可选：OpenSSL（若需要重新生成自签名证书；通常 Git for Windows 自带）

## 快速开始（Windows / PowerShell）
1) 进入项目目录并启动本地 HTTPS 服务器。

```powershell
# 查看 Python 版本（可选）
python -V

# 启动服务器（默认端口 8000，可自定义）
python web.py 8000
```

2) 浏览器访问：https://localhost:8000/
- 首次可能提示“连接不安全/不受信任”，因证书为自签名。继续访问或手动信任证书即可（仅限本地开发）。

注: PC端无陀螺仪可以直接打开index.html使用，可无需启动服务器

## 使用说明
- 在“原始图像 / 深度图”处选择文件进行加载
- 滑块：
  - 3D阈值（threshold）：控制视差灵敏度
  - 突出程度（protrude）：整体前后偏移基准
  - x偏转 / y偏转（x_diff / y_diff）：视差方向偏移
- 画布交互：
  - 按住并拖拽画布，快速调整 x_diff / y_diff，松开停止

## 故障与排查
- 打不开页面/证书问题：
  - 如果缺少证书且未安装 OpenSSL，`web.py` 会输出生成指引。也可安装 Git for Windows 并复用其中的 OpenSSL。
- 浏览器提示不支持 WebGL：
  - 确认浏览器版本较新并启用硬件加速；或更换 Chrome/Edge/Firefox 等现代浏览器。

## 已知限制
- 片段着色器与部分功能仍在开发中（源码含占位符 …），部分高级参数尚未接线
- 陀螺仪控制仅在支持的移动端设备/浏览器并授予权限后可用

## 路线图（建议）
- 完善片段着色器卷积/模糊与边缘处理
- 提供示例图像与深度图素材
- 增加自动化测试与更详细文档

## 许可
MIT
